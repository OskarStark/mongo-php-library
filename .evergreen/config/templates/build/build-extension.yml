  - name: "build-php-%phpVersion%"
    tags: ["build", "php%phpVersion%", "stable", "pr", "tag"]
    commands:
      - func: "locate PHP binaries"
        vars:
          PHP_VERSION: "%phpVersion%"
      - func: "compile extension"
        # TODO: remove once 1.21.0 is released
        vars:
          EXTENSION_BRANCH: "v1.x"
      - func: "upload extension"
  - name: "build-php-%phpVersion%-lowest"
    tags: ["build", "php%phpVersion%", "lowest", "pr", "tag"]
    commands:
      - func: "locate PHP binaries"
        vars:
          PHP_VERSION: "%phpVersion%"
      - func: "compile extension"
        vars:
          # TODO: change to "EXTENSION_VERSION: 1.21.0" once 1.21.0 is released
          # EXTENSION_VERSION: "1.21.0"
          EXTENSION_BRANCH: "v1.x"
      - func: "upload extension"
  - name: "build-php-%phpVersion%-next-stable"
    tags: ["build", "php%phpVersion%", "next-stable", "pr", "tag"]
    commands:
      - func: "locate PHP binaries"
        vars:
          PHP_VERSION: "%phpVersion%"
      - func: "compile extension"
        vars:
          # TODO: change to "v1.21" once 1.21.0 is released
          # EXTENSION_BRANCH: "v1.21"
          EXTENSION_BRANCH: "v1.x"
      - func: "upload extension"
  - name: "build-php-%phpVersion%-next-minor"
    tags: ["build", "php%phpVersion%", "next-minor"]
    commands:
      - func: "locate PHP binaries"
        vars:
          PHP_VERSION: "%phpVersion%"
      - func: "compile extension"
        vars:
          EXTENSION_BRANCH: "v1.x"
      - func: "upload extension"
